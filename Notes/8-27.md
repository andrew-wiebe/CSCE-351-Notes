OS objectives
---
___

Prodice conveince 
- simplify I/O accesses
- simple usrs infercaces
- portability

Manage resources
- memory
- processes
- I/O devices
- communication media (shared memory, sockets)

Ease of evolution
- support new hardware components
- provide new services
- support maintenance

A major portion of this course is on resource management
- memory 
- process/thread


memory hirearchy

l0 - registers
- volatile
l1 - l1 cache (sram)
- volatile
l2 cache (sram)
- volatile
l3 - main memory (dram)
- dram is volatile so when the power is turned off it vanishes
l4 - local secondary storage (local disks)
l5 - remote secondary storage (tapes, distributed file systems, web servers)

there will be multiple copies of the data at each level

cache - a smaller, faster storage device that acts as a staging area for a subset of the data in a larger slower device
- fundemental idea of a memory hierachy
    - for each k the faster smaller device at level k serves as a cache for the larger slower device at level k+1

why do they work?
- think of a convience store - why do you go there instead of a super store (target)
- caches work because they store the most important things, if you dont find it on the higher level, go down a level

Principle of locality -  if you are using something right now you are likely to use it in the near future

spatial locality - if using location x, you are likely to use x-1 or x + 1
temporal locality - you are going to access the same data soon time wise


caching in real like
- your refrigerator 
- your web bookmarks
- your music playlists

Cache memories are small, fast SRAM-based memories managed automatically in hardware
- hold frequently accessed blocks of main memory

Cpu first looks for data in caches then main memory

cold start miss
- cold misses occur because the cache is empty

conflict miss 
- most caches limit blocks at level k+1 to a small subset of the block positions at level k
    - eg block i at level k+1 must be placed in block (i mod 4 ) at levle k
- conflict misses occur when the level k cache is large enough but multiple data objects all map to the same level 
k block
    - eg referencing blocks 0,8,0,8,0,8... would miss every time

capacity miss
- occurs when the set of active cache blocks (working set) is larger than the cache

Practical miss examples

looking for your car in the parking lot
- you find it (hit)
- you do not find it
    - cold start miss: the lot is empty
    - capacity miss: the parking lot is full; your car is not there
    - conflict miss: a car can only park ina  stall if its last two digits of its liscense plate matches the stall number; go to that stall, the car is not there

Cache organization

cache read
- locate set
- check if any line in set has matching tag
- yes + line valid: hit

Address of word

t bits = tag, s bits = set index, b bits = block offset

S = 2^s sets

